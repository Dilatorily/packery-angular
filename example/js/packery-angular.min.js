/*!
 * packery-angular v1.0.0 (http://dilatorily.github.io/packery-angular)
 * Copyright 2016 Dilatorily
 * Licensed under the MIT license
 */
!function(e,n,t){"use strict";function a(){return{columnWidth:1,dragSelector:"",isAppended:!0,isDraggable:!0,itemSelector:".pa-item",rowHeight:1,stamp:".pa-stamp"}}function o(){return{DESTROYED:"$paDestroyed",DRAGGED:"$paDragItemPositioned",FITTED:"$paFitComplete",INITIALIZED:"$paInitialized",ITEM:{ADDED:"$paItemAdded",DESTROYED:"$paItemDestroyed"},LAYOUT_COMPLETED:"$paLayoutComplete",PACKERY:{DRAGGED:"dragItemPositioned",FITTED:"fitComplete",LAYOUT_COMPLETED:"layoutComplete",REMOVE:"removeComplete"},REMOVE:"$paRemoveComplete"}}function r(n,t,a,o,r,i,p,c){function d(e){$.then(function(){n.isAppended?g.packery.appended(e):g.packery.prepended(e),n.draggabilly.isDraggable&&D(e),n.$emit(p.ITEM.ADDED,m,g.packery,e),u()})}function l(e){$.then(function(){k||(g.packery.remove(e),n.$emit(p.ITEM.DESTROYED,m,g.packery,e),u())})}function y(){n.$on("$destroy",function(e){k=!0,$.then(function(){g.packery.destroy(),n.$emit(p.DESTROYED,m,g.packery,e)})})}function s(){function t(){var t;for(t in c)c.hasOwnProperty(t)&&!n.options.hasOwnProperty(t)&&(n.options[t]=e.copy(c[t]))}function a(){n.isAppended=n.options.isAppended,delete n.options.isAppended}function o(){n.draggabilly={dragSelector:n.options.dragSelector,isDraggable:n.options.isDraggable},delete n.options.dragSelector,delete n.options.isDraggable}n.options=n.packery?e.copy(n.packery):{},t(),a(),o()}function E(){function a(){var a=t[0].children;n.draggabilly.isDraggable&&e.forEach(a,function(e){D(e)})}function o(){g.packery.on(p.PACKERY.LAYOUT_COMPLETED,function(e){n.$emit(p.LAYOUT_COMPLETED,m,g.packery,e)}),g.packery.on(p.PACKERY.DRAGGED,function(e){n.$emit(p.DRAGGED,m,g.packery,e)}),g.packery.on(p.PACKERY.FITTED,function(e){n.$emit(p.FITTED,m,g.packery,e)}),g.packery.on(p.PACKERY.REMOVED,function(e){n.$emit(p.REMOVED,m,g.packery,e)})}g.packery=new r(t[0],n.options),n.$emit(p.INITIALIZED,m,g.packery),a(),o(),f.resolve()}function D(e){var t=new i(e,{handle:n.draggabilly.dragSelector});g.packery.bindDraggabillyEvents(t)}function u(){$.then(function(){o(function(){g.packery.layout()})})}var g=this,f=a.defer(),$=f.promise,k=!1,m=(new Date).getTime();g.packery=void 0,g.add=d,g.remove=l,y(),s(),o(E)}function i(){return{controller:"paPackery",restrict:"EA",scope:{packery:"<?paOptions"}}}function p(){function e(e,n,t,a){a.packery&&a.add(n[0]),e.$on("$destroy",function(){a.remove(n[0])})}return{link:e,require:"^paPackery",restrict:"EA"}}e.module("packery-angular",[]).constant("$paDraggabilly",n).constant("$paPackery",t).constant("$paOptions",a()).constant("$paEvents",o()).controller("paPackery",r).directive("paPackery",i).directive("paPackeryItem",p),r.$inject=["$scope","$element","$q","$timeout","$paPackery","$paDraggabilly","$paEvents","$paOptions"],p.$inject=["$paEvents"]}(window.angular,window.Draggabilly,window.Packery);